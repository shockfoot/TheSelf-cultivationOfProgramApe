# 变量和常量

## 变量

**变量**是供程序操作的存储区的名称，用于存储和表示数据的标识符。每个变量都有一个特定的**类型**，用于确定可存储范围、所占内存大小和布局以及对变量的操作。

变量声明包含访问修饰符、变量类型、变量名。变量可在声明时赋值。当在程序中声明变量时，**必须指定其类型或使用`var`关键字让编译器推断类型。** 在同一代码块内，声明变量后，**不能使用新类型重新声明同名变量**，并且不能分配与其声明类型不兼容的值，但可以转换成其他类型。**变量可被多次赋值，但其值为最近一次的赋值。在获取变量（尤其是局部变量）的值之前，必须明确赋值。**

```csharp
// 声明
float temperature;
// 赋值：第一次赋值称初始化
temperature = 37.6f;
// 声明并初始化
int[] source = { 0, 1, 2 };
// 单行声明、赋值多个同类型变量
int age = 18, money = 0;
// 推断类型
var sourceItem = sourece[0];
```

变量是lvalue的，可以在表达式中作为左值。数值是rvalue的，不能被赋值，不能在表达式中作为左值。

## 变量的作用域

变量的作用域定义了变量的可见性和生命周期。

- 在函数或由花括号`{}`定义的代码块中声明的变量，称为**局部变量**，只能在函数或代码块内部使用。
- 在函数参数的定义中声明的变量，称为**形式参数**，只能在函数内部使用。
- 在所有函数外部声明的变量，称为**全局变量**，在程序的整个生命周期内都有效，可以被任何函数访问。
- 在类内部声明的变量，称为**类的字段**，其生命周期与类的生命周期相同，可以使用访问修饰符限制其可见性。

局部变量需要手动初始化，全局变量和类的字段如果不手动初始化，系统会自动以默认值初始化。

## 常量

**常量是不可变的值，在编译时是已知的，于程序生命周期内不会改变。** 常量可以被当作常规的变量，只是其值在定义后不能被修改。**常量只能是基本数据类型**，比如整数、浮点、布尔、字符、字符串或枚举常量。

使用`const`关键字定义常量，在声明时**必须**初始化。常量默认是`static`、`readonly`的，只有⼀个副本。定义一个常量的语法如下：

```csharp
public const int MONTH = 12;
```

常量标识符类似占位符。在编译过程中，编译器会将常量的文本值直接替换到它生成的IL代码中，运行时没有与常量相关联的变量地址，所以此后便与该常量无关了，因此常量不能通过引用传递，且不能在表达式中显示为左值。

引用其他程序集中定义的常量需要注意，如果该程序集定义了新的常量值，则程序仍将保留旧的文本值，即**常量不支持跨程序集版本更新**，所以：

- 不随意使用常量，尤其是可能变化的数据。
- 不随意更改已定义好的常量值。
- 使用常量的代码必须重新编译。
