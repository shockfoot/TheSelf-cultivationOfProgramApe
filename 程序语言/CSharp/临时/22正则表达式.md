# 正则表达式

正则表达式是一种匹配输入文本的模式，专门用于字符串处理，实现检索或匹配。.Net框架提供了允许这种匹配的正则表达式引擎。正则表达式由一个或多个字符、运算符和结构组成。

正则表达式的各种类别的字符、运算符和结构有：字符转义、字符类、定位点、分组结构、限定符、反向引用构造、备用构造、替换、杂项构造。

## 字符转义

正则表达式中的反斜杠字符`\`指示其后跟的字符是特殊字符，或应按原义解释该字符。

- `\a`：报警（bell）符。
- `\b`：退格键。
- `\t`：制表符。
- `\r`：回车符。
- `\v`：垂直制表符。
- `\f`：换页符。
- `\n`：换行符。
- `\e`：转义符。
- `\nnn`：使用八进制表示形式指定一个字符（nnn由二到三位数字组成）。
- `\xnn`：使用十六进制表示形式指定字符（nn恰好由两位数字组成）。
- `\unnnn`：使用十六进制表示形式匹配一个字符（由nnnn表示的四位数）。
- `\cx`或`\cX`：匹配X或x指定的ASCII控件字符，其中X或x是控件字符的字母。
- `\`：在后面带有不识别的转义字符时，与该字符匹配。

## 字符类

字符类与一组字符中的任何一个字符匹配。

- `[character_group]`：匹配character_group中的任何单个字符。默认情况下，匹配区分大小写。
- `[^character_group]`：匹配不在character_group中的任何单个字符。默认情况下，匹配区分大小写。
- `[first-last]`：匹配first到last范围中的任何单个字符。
- `.`：通配符：与除`\n`之外的任何单个字符匹配。句点字符需要使用转义字符。
- `\p{name}`：与name指定的Unicode通用类别或命名块中的任何单个字符匹配。
- `\P{name}`：与不在name指定的Unicode通用类别或命名块中的任何单个字符匹配。
- `\w`：与任何单词字符匹配，即字母、数字、下划线、汉字。
- `\W`：与任何非单词字符匹配。
- `\s`：与任何空白字符匹配。
- `\S`：与任何非空白字符匹配。
- `\d`：与任何十进制数字匹配。
- `\D`：与任何非十进制数字匹配。

## 定位点

定位点或原子零宽度断言会使匹配成功或失败，具体取决于字符串中的当前位置，但它们不会使引擎在字符串中前进或使用字符。

- `^`：匹配必须从字符串或一行的开头开始。
- `$`：匹配必须出现在字符串的末尾或出现在行或字符串末尾的`\n`之前。
- `\A`：匹配必须出现在字符串的开头。
- `\z`：匹配必须出现在字符串的末尾。
- `\Z`：匹配必须出现在字符串的末尾或字符串末尾的`\n`之前。
- `\G`：匹配必须出现在上一个匹配结束的地方。
- `\b`：匹配一个单词边界，也就是指单词和空格间的位置。
- `\B`：匹配非单词边界。

## 分组结构

分组构造描述了正则表达式的子表达式，通常用于捕获输入字符串的子字符串。

- `(subexpression)`：捕获匹配的子表达式并将其分配到一个从零开始的序号中。
- `(?<name>subexpression)`：将匹配的子表达式捕获到一个命名组中。
- `(?<name1-name2>subexpression)`：定义平衡组定义。
- `(?:subexpression)`：定义非捕获组。
- `(?imnsx-imnsx:subexpression)`：应用或禁用subexpression中指定的选项。
- `(?=subexpression)`：零宽度正预测先行断言。
- `(?!subexpression)`：零宽度负预测先行断言。
- `(?<=subexpression)`：零宽度正回顾后发断言。
- `(?<!subexpression)`：零宽度负回顾后发断言。
- `(?>subexpression)`：非回溯（也称为“贪婪”）子表达式。

## 限定符

限定符指定在输入字符串中必须存在上一个元素（可以是字符、组或字符类）的多少个实例才能出现匹配项。

- `*`：匹配上一个元素零次或多次。
- `+`：匹配上一个元素一次或多次。
- `?`：匹配上一个元素零次或一次。
- `{n}`：匹配上一个元素恰好n次。
- `{n,}`：匹配上一个元素至少n次。
- `{n,m}`：匹配上一个元素至少n次，但不多于m次。
- `*?`：匹配上一个元素零次或多次，但次数尽可能少。
- `+?`： 匹配上一个元素一次或多次，但次数尽可能少。
- `??`：匹配上一个元素零次或一次，但次数尽可能少。
- `{n}?`：匹配前导元素恰好n次。
- `{n,}?`：匹配上一个元素至少n次，但次数尽可能少。
- `{n,m}?`：匹配上一个元素的次数介于n和m之间，但次数尽可能少。

## 反向引用构造

反向引用允许在同一正则表达式中随后标识以前匹配的子表达式。

- `\number`：反向引用。匹配编号子表达式的值。
- `\k<name>`：命名反向引用。匹配命名表达式的值。

## 备用构造

备用构造用于修改正则表达式以启用either/or匹配。

- `|`：匹配以竖线字符分隔的任何一个元素。
- `(?(expression)yes|no)`：如果正则表达式模式由expression匹配指定，则匹配yes；否则匹配可选的no部分。 expression被解释为零宽度断言。
- `(?(name)yes|no)`：如果name或已命名或已编号的捕获组具有匹配，则匹配yes；否则匹配可选的no部分。

## 替换

替换是替换模式中使用的正则表达式。

- `$number`：替换按组number匹配的子字符串。
- `${name}`：替换按命名组name匹配的子字符串。
- `$$`：替换字符“$”。
- `$&`：替换整个匹配项的一个副本。
- `$``：替换匹配前的输入字符串的所有文本。
- `$'`： 替换匹配后的输入字符串的所有文本。
- `$+`：替换最后捕获的组。
- `$_`：替换整个输入字符串。

## 杂项构造

- `(?imnsx-imnsx)`：在模式中间对诸如不区分大小写这样的选项进行设置或禁用。
- `(?#注释)`：内联注释。该注释在第一个右括号处终止。
- `#[行尾]`：该注释以非转义的#开头，并继续到行的结尾。