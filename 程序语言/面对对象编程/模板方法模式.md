# 模板方法

> Define the skeleton of an algorithm in an operation, deferring some steps to subclass. Templete Method lets subclasses redefine certain steps of an algorithm without changing the algorithm's structure.

模板方法（Templete Method）模式，也称钩子方法、钩子操作，指定义一个操作中的算法的骨架，而将一些步骤延迟到子类中实现。模板方法模式使得子类在不改变算法结构的情况下即可重定义该算法的某些特定步骤。

> 钩子方法：提供了缺省的行为，子类可以在必须要进行扩展。

在抽象模板中，由子类实现的称为基本方法，对基本方法进行调度以完成算法的称之为模板方法。为了防止恶意操作，一般模板方法不允许被重写。

**适用于**：

- 一次性实现一个算法不变部分，并将可变行为留给子类实现。
- 各子类中公共的行为应被提取到父类中以避免代码重复，最好用一个调用这些新操作的模板方法来替换这些不同的代码。
- 控制子类扩展。

**优点**：

- 封装不变部分，扩展可变部分。
- 提取公共部分，便于维护。
- 行为由父类控制，子类只负责实现。

**缺点**：

- 子类会影响父类。

## 案例

生产车，具有`Start()`、`Stop()`、`Alarm()`等功能。在车辆运行时，根据车型决定能否鸣笛。

``` csharp
public abstract class AbstractCar
{
    protected abstract void Start();
    protected abstract void Stop();
    protected abstract void Alarm();

    public void Run()
    {
        Start();
        Stop();
        Alarm();
    }
}

public class AlarmCar : AbstractCar
{
    protected override void Start() { }
    protected override void Stop() { }
    protected override void Alarm() { Console.WriteLine("Alarm..."); }
}

public class NoAlarmCar : AbstractCar
{
    protected override void Start() { }
    protected override void Stop() { }
    protected override void Alarm() { }
}
```