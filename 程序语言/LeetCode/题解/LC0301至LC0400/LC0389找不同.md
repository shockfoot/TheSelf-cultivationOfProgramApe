# LC0389找不同

难度：简单
数据结构：字符串
算法：哈希表、位运算

## 题目

给定两个字符串s和t，它们只包含小写字母。

字符串t由字符串s随机重排，然后在随机位置添加一个字母。

请找出在t中被添加的字母。

示例：

> 输入：s = "abcd", t = "abcde"
> 输出："e"
> 解释：'e'是那个被添加的字母。

提示：

- 0 <= s.length <= 1000
- t.length == s.length + 1
- s和t由小写英文字母组成

## 题解

### 哈希表

使用哈希表记录t中出现的字母和次数，然后遍历s，找到s中未出现的字母。

``` csharp
public char FindTheDifference(string s, string t)
{
    if (string.IsNullOrEmpty(s))
    {
        return t[0];
    }

    int n = t.Length;
    char c;
    Dictionary<char, int> set = new Dictionary<char, int>(26);
    for (int i = 0; i < n; i++)
    {
        c = t[i];
        if (set.ContainsKey(c))
        {
            set[c]++;
        }
        else
        {
            set.Add(c, 1);
        }
    }

    n = s.Length;
    for (int i = 0; i < n; i++)
    {
        c = s[i];
        if (set.ContainsKey(c))
        {
            set[c]--;
            if (set[c] <= 0)
            {
                set.Remove(c);
            }
        }
    }

    return set.First().Key;
}
```

对上述算法可以优化。使用int数组来存储字符串s中所有字母出现的次数，在遍历t时，当某个字母出现的此时小于0时，该字母即为多余的字母。

``` csharp
public char FindTheDifference(string s, string t)
    {
        if (string.IsNullOrEmpty(s))
        {
            return t[0];
        }
        
        int[] charCount = new int[26];
        
        int n = s.Length;
        for (int i = 0; i < n; i++)
        {
            charCount[s[i] - 'a']++;
        }

        n = t.Length;
        char c;
        for (int i = 0; i < n; i++)
        {
            c = t[i];
            charCount[c - 'a']--;
            if (charCount[c - 'a'] < 0)
            {
                return c;
            }
        }

        return ' ';
    }
```

时间复杂度：时间复杂度为O(n)，其中n为字符串t的长度。

空间复杂度：最多只用了长度为26的整数数组，空间复杂度为O(1)。

### 求和

对字符串s中每个字符的ASCII码的值求和，得到A~s~，同样的对字符串t求和得到A~t~，两者的差值即为多余的字符。

``` csharp
public char FindTheDifference(string s, string t)
{
    if (string.IsNullOrEmpty(s))
    {
        return t[0];
    }

    int sum = 0;

    int n = s.Length;
    for (int i = 0; i < n; i++)
    {
        sum += s[i];
    }

    n = t.Length;
    for (int i = 0; i < n; i++)
    {
        sum -= t[i];
    }

    return (char)(-sum);
}
```

时间复杂度：时间复杂度为O(n)，其中n为字符串t的长度。

空间复杂度：空间复杂度为O(1)。

### 位运算

可以发现，多余的字母出现的次数必定为奇数次，因此可以使用位运算中的异或来筛选出现次数为奇数次的字母。

``` csharp
public char FindTheDifference(string s, string t)
{
    if (string.IsNullOrEmpty(s))
    {
        return t[0];
    }

    int rel = 0;
        
    int n = s.Length;
    for (int i = 0; i < n; i++)
    {
        rel ^= s[i];
    }

    n = t.Length;
    for (int i = 0; i < n; i++)
    {
        rel ^= t[i];
    }

    return (char)rel;
}
```

时间复杂度：时间复杂度为O(n)，其中n为字符串t的长度。

空间复杂度：空间复杂度为O(1)。