# 0020有效的括号

难度：简单
数据结构：字符串

## 题目

给定一个只包括'('、')'、'{'、'}'、'['、 ']'的字符串s，判断字符串是否有效。

有效字符串需满足：

1. 左括号必须**用相同类型的右括号闭合**。
2. 左括号必须**以正确的顺序闭合**。
3. 每个右括号都有一个对应的相同类型的左括号。

示例：

> 输入：s = "()[]"
> 输出：true

> 输入：s = "(]"
> 输出：false

提示：

- 1 &lt;= s.lenth &lt;= 10^4^
- s仅由括号'()[]{}'组成

## 题解

有效字符串长度必是偶数。

### 辅助栈

此题可以用栈来解决括号的按顺序匹配。

``` csharp
public bool IsValid(string s)
{
    int length = s.Length;
    if (length % 2 != 0) return false;

    Dictionary<char, char> dicMap = new Dictionary<char, char>()
    {
        { ')', '(' },
        { ']', '[' },
        { '}', '{' }
    };
    Stack<char> stack = new Stack<char>((length + 1) / 2);
    for (int i = 0; i < length; i++)
    {
        if (s[i] == '(' || s[i] == '[' || s[i] == '{')
        {
            stack.Push(s[i]);
        }
        else
        {
            if (stack.Count == 0 || stack.Peek() != dicMap[s[i]])
            // 可以不使用字典而直接判断
            // (s[left] == '(' && s[right] == ')') ||
            // (s[left] == '[' && s[right] == ']') ||
            // (s[left] == '{' && s[right] == '}')
                return false;
            stack.Pop();
        }
    }
    return stack.Count == 0;
}
```

也可以不使用字符做判断，而直接使用字符对应的ASCII码值，因为左右两括号的ASCII码值之差不超过2，可以节省字典的内存开销。

``` csharp
public bool IsValid(string s)
{
    int length = s.Length;
    if (length % 2 != 0) return false;

    Stack<char> stack = new Stack<char>((length + 1) / 2);
    for (int i = 0; i < length; i++)
    {
        if (stack.Count == 0)
        {
            stack.Push(s[i]);
        }
        else if (s[i] - stack.Peek() == 1 || s[i] - stack.Peek() == 2)
        {
            stack.Pop();
        }
        else
        {
            stack.Push(s[i]);
        }
    }
    return stack.Count == 0;
}
```

时间复杂度：需要遍历字符串，时间复杂度为O(n)，n为字符串长度。

空间复杂度：使用了栈临时存储每个字符，因此空间复杂度为O(n)。

### 奇怪的解法

``` csharp
public bool IsValid(string s)
{
    while (true)
    {
        int length = s.Length;
        s = s.Replace("()", "").Replace("[]", "").Replace("{}", "");
        if (length == s.Length) return length == 0;
    }
}
```